<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Find the Snake</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: url("https://images.pexels.com/photos/31533982/pexels-photo-31533982.jpeg") no-repeat center center fixed;
      background-size: cover;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 70px; /* ‚úÖ Push content below browser bar */
      color: white;
      text-align: center;
    }

    h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
    }

    #score {
      background: rgba(0,0,0,0.6);
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 1.2em;
      margin-bottom: 20px;
    }

    .game-container {
      position: relative;
      display: inline-block;
      border: 3px solid #fff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 6px 15px rgba(0,0,0,0.6);
    }

    #gameImage {
      max-width: 90vw;
      max-height: 70vh;
      display: block;
      border-radius: 12px;
    }

    #overlay {
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
    }

    #message {
      margin-top: 15px;
      font-size: 1.3em;
      font-weight: bold;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.7);
    }

    .controls {
      margin-top: 20px;
    }

    button {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 12px 20px;
      margin: 5px;
      font-size: 1em;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: #45a049;
    }

    #backBtn {
      background: #ff5252;
    }
    #backBtn:hover {
      background: #e04646;
    }
  </style>
</head>
<body>
  <h1>üêç Find the Snake!</h1>
  <div id="score">Score: 0 / 6</div>

  <div class="game-container">
    <img id="gameImage" src="" alt="Snake Game">
    <canvas id="overlay"></canvas>
  </div>

  <div id="message"></div>

  <div class="controls">
    <button id="backBtn" style="display:none;">‚¨Ö Back</button>
    <button id="nextBtn" style="display:none;">Next ‚û°</button>
  </div>

 <script>
 const img = document.getElementById("gameImage");
const message = document.getElementById("message");
const nextBtn = document.getElementById("nextBtn");
const backBtn = document.getElementById("backBtn");
const scoreBox = document.getElementById("score");
const canvas = document.getElementById("overlay");
const ctx = canvas.getContext("2d");

// Snake rounds with hotspots
const rounds = [
  { src: "snake1.jpg", hotspot: { type: "rect", x1: 506, y1: 271, x2: 971, y2: 455 }, solved: false },
  { src: "snake2.jpg", hotspot: { type: "circle", x: 765, y: 483, radius: 102 }, solved: false },
  { src: "snake3.jpg", hotspot: { type: "rect", x1: 203, y1: 24, x2: 255, y2: 395 }, solved: false },
  { src: "snake4.jpg", hotspot: { type: "rect", x1: 243, y1: 109, x2: 294, y2: 204 }, solved: false },
  { src: "snake5.jpg", hotspot: { type: "circle", x: 261, y: 171, radius: 29 }, solved: false },
  { src: "snake6.jpg", hotspot: { type: "rect", x1: 50, y1: 155, x2: 417, y2: 232 }, solved: false }
];

let currentRound = 0;
let score = 0;

function resizeCanvas() {
  canvas.width = img.clientWidth;
  canvas.height = img.clientHeight;
}

function drawHotspot(hotspot) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.strokeStyle = "red";
  ctx.lineWidth = 3;

  const scaleX = img.clientWidth / img.naturalWidth;
  const scaleY = img.clientHeight / img.naturalHeight;

  if (hotspot.type === "circle") {
    ctx.beginPath();
    ctx.arc(hotspot.x * scaleX, hotspot.y * scaleY, hotspot.radius * scaleX, 0, 2 * Math.PI);
    ctx.stroke();
  } else if (hotspot.type === "rect") {
    const x1 = Math.min(hotspot.x1, hotspot.x2) * scaleX;
    const y1 = Math.min(hotspot.y1, hotspot.y2) * scaleY;
    const w = Math.abs(hotspot.x2 - hotspot.x1) * scaleX;
    const h = Math.abs(hotspot.y2 - hotspot.y1) * scaleY;
    ctx.strokeRect(x1, y1, w, h);
  }
}

function loadRound() {
  img.src = rounds[currentRound].src;
  message.textContent = "";
  nextBtn.style.display = "none";
  backBtn.style.display = currentRound > 0 ? "inline-block" : "none";
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // If already solved, redraw hotspot & show correct message
  if (rounds[currentRound].solved) {
    drawHotspot(rounds[currentRound].hotspot);
    message.textContent = "‚úÖ Already solved!";
    message.style.color = "#76ff03";
    nextBtn.style.display = "inline-block";
  }
}

img.onload = () => resizeCanvas();

img.addEventListener("click", function(event) {
  if (rounds[currentRound].solved) return; // Don‚Äôt rescore solved rounds

  const rect = img.getBoundingClientRect();
  const x = event.clientX - rect.left;
  const y = event.clientY - rect.top;
  const scaleX = img.naturalWidth / img.width;
  const scaleY = img.naturalHeight / img.height;

  const clickX = x * scaleX;
  const clickY = y * scaleY;

  const hotspot = rounds[currentRound].hotspot;
  let correct = false;

  if (hotspot.type === "circle") {
    const dx = clickX - hotspot.x;
    const dy = clickY - hotspot.y;
    const distance = Math.sqrt(dx * dx + dy * dy);
    correct = distance <= hotspot.radius;
  } else if (hotspot.type === "rect") {
    correct =
      clickX >= Math.min(hotspot.x1, hotspot.x2) &&
      clickX <= Math.max(hotspot.x1, hotspot.x2) &&
      clickY >= Math.min(hotspot.y1, hotspot.y2) &&
      clickY <= Math.max(hotspot.y1, hotspot.y2);
  }

  if (correct) {
    message.textContent = "‚úÖ Correct! You found the snake!";
    message.style.color = "#76ff03";
    score++;
    rounds[currentRound].solved = true;
    scoreBox.textContent = `Score: ${score} / ${rounds.length}`;
    drawHotspot(hotspot);
    nextBtn.style.display = "inline-block";
  } else {
    message.textContent = "‚ùå Nope, try again!";
    message.style.color = "#ff5252";
  }
});

nextBtn.addEventListener("click", function() {
  currentRound++;
  if (currentRound < rounds.length) {
    loadRound();
  } else {
    img.style.display = "none";
    canvas.style.display = "none";
    message.textContent = "üéâ Game Over!";
    scoreBox.textContent = `Your Score: ${score} / ${rounds.length}`;
    nextBtn.style.display = "none";
    backBtn.style.display = "none";
  }
});

backBtn.addEventListener("click", function() {
  if (currentRound > 0) {
    // ‚úÖ If solved, undo the score before going back
    if (rounds[currentRound].solved) {
      score--;
      rounds[currentRound].solved = false;
      scoreBox.textContent = `Score: ${score} / ${rounds.length}`;
    }
    currentRound--;
    loadRound();
  }
});

// Start first round
loadRound();
scoreBox.textContent = `Score: ${score} / ${rounds.length}`;

</script>

</body>
</html>
